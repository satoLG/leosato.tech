/* DialogManager - Complete styling for dialog system */

/* CSS Custom Properties - Dynamic scaling system */
:root {
    --dialog-scale-factor: 1;
    --dialog-font-size: 12px;
    --dialog-padding: 50px;
    --dialog-min-width: 250px;
}

/* Dialog Manager Container */
.dialog-manager-container {
    position: fixed;
    pointer-events: none;
    z-index: 1000;
    transition: all 0.3s ease;
    transform-origin: center;
    /* Performance optimizations for mobile */
    will-change: transform, opacity;
    transform: translateZ(0); /* Force hardware acceleration */
}

/* Main Dialog Box */
.dialog-box {
    display: flex;
    align-items: center;
    justify-content: left;
    font-family: 'Press Start 2P', monospace !important;
    font-size: var(--dialog-font-size);
    letter-spacing: 1px;
    line-height: 1.4; /* Add proper line spacing for multi-line text */
    color: #ffffff;
    text-align: center;
    padding: var(--dialog-padding) calc(var(--dialog-padding) * 1.4);
    background: linear-gradient(145deg, #2a2a2aff, #1a1a1aff);
    border: 3px solid #ffffff;
    box-shadow: 0 0 calc(14px * var(--dialog-scale-factor)) #0000008f;
    cursor: pointer;
    user-select: none;
    min-width: var(--dialog-min-width);
    max-width: calc(90vw);
    min-height: calc(25px * var(--dialog-scale-factor));
    position: relative;
    transition: opacity 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55), 
               transform 0.6s cubic-bezier(0.68, -0.55, 0.265, 1.55);
    pointer-events: auto;
    opacity: 0;
    transform: scale(0);
    transform-origin: center center;
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* Performance optimizations for mobile */
    will-change: transform, opacity;
    transform: translateZ(0); /* Force hardware acceleration */
    contain: layout style; /* Prevent layout recalculation cascading */
    isolation: isolate; /* Create new stacking context */
}

.dialog-box.show {
    opacity: 1;
    transform: scale(1);
}

.dialog-box.fade-out {
    opacity: 0 !important;
    transform: scale(0) !important;
    pointer-events: none !important;
    transition: opacity 0.5s cubic-bezier(0.55, 0.085, 0.68, 0.53),
               transform 0.5s cubic-bezier(0.55, 0.085, 0.68, 0.53) !important;
}

/* Dialog Triangles/Pointers */
.dialog-triangle {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-left: 12px solid transparent;
    border-right: 12px solid transparent;
    border-top: 12px solid #ffffff;
}

.dialog-triangle-inner {
    content: '';
    position: absolute;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #2a2a2aff;
}

.dialog-triangle.bottom {
    bottom: -12px;
    left: 15%;
    transform: translateX(-50%);
}

.dialog-triangle-inner.bottom {
    bottom: -8px;
    left: 15%;
    transform: translateX(-50%);
}

.dialog-triangle.top {
    top: -12px;
    left: 15%;
    transform: translateX(-50%) rotate(180deg);
}

.dialog-triangle-inner.top {
    top: -8px;
    left: 15%;
    transform: translateX(-50%) rotate(180deg);
}

.dialog-triangle.left {
    left: -12px;
    top: 50%;
    transform: translateY(-50%) rotate(-90deg);
}

.dialog-triangle-inner.left {
    left: -8px;
    top: 50%;
    transform: translateY(-50%) rotate(-90deg);
}

.dialog-triangle.right {
    right: -12px;
    top: 50%;
    transform: translateY(-50%) rotate(90deg);
}

.dialog-triangle-inner.right {
    right: -8px;
    top: 50%;
    transform: translateY(-50%) rotate(90deg);
}

/* Typewriter Cursor */
.Typewriter__cursor {
    font-weight: bold;
    animation: blink 1s infinite;
    margin-left: 2px;
    /* Performance optimizations for mobile */
    will-change: opacity;
    transform: translateZ(0); /* Force hardware acceleration */
    backface-visibility: hidden;
}

@keyframes blink {
    0%, 50% { opacity: 1; }
    51%, 100% { opacity: 0; }
}

/* Answer Container - Fixed position at bottom */
.dialog-answer-container {
    position: fixed !important;
    bottom: 20px !important;
    left: 50% !important;
    width: 90% !important;
    max-width: 800px !important;
    z-index: 1001 !important;
    display: grid !important;
    grid-template-columns: 1fr 1fr !important;
    grid-template-rows: 1fr 1fr !important;
    gap: 15px !important;
    opacity: 0 !important;
    transform: translateX(-50%) translateY(20px) !important;
    transition: all 0.4s ease !important;
    pointer-events: none !important;
}

.dialog-answer-container.show {
    opacity: 1 !important;
    transform: translateX(-50%) translateY(0) !important;
    pointer-events: all !important;
}

/* Answer Options - Individual buttons */
.dialog-answer-option {
    font-family: 'Press Start 2P', monospace !important;
    font-size: 10px !important;
    letter-spacing: 1px !important;
    line-height: 1.4 !important;
    color: #ffffff !important;
    text-align: center !important;
    padding: 15px 20px !important;
    background: linear-gradient(145deg, #4a4a4a, #2a2a2a) !important;
    border: 4px solid #888888 !important;
    box-shadow: 0 4px 12px rgba(0,0,0,0.4) !important;
    cursor: pointer !important;
    user-select: none !important;
    transition: all 0.2s ease !important;
    min-height: 60px !important;
    display: flex !important;
    align-items: center !important;
    justify-content: center !important;
    word-wrap: break-word;
    overflow-wrap: break-word;
    /* Performance optimizations */
    will-change: transform, background-color, border-color;
    transform: translateZ(0);
    backface-visibility: hidden;
}

/* Color variants for answer options */
.dialog-answer-option.red {
    color: #ff6666 !important;
    border-color: #ff6666 !important;
}

.dialog-answer-option.blue {
    color: #6666ff !important;
    border-color: #6666ff !important;
}

.dialog-answer-option.green {
    color: #66ff66 !important;
    border-color: #66ff66 !important;
}

.dialog-answer-option.yellow {
    color: #ffff66 !important;
    border-color: #ffff66 !important;
}

/* Answer option states */
.dialog-answer-option:hover {
    background: linear-gradient(145deg, #5a5a5a, #3a3a3a) !important;
    border-color: #ffffff !important;
    transform: translateY(-2px) !important;
    box-shadow: 0 6px 16px rgba(0,0,0,0.5) !important;
}

.dialog-answer-option:active {
    transform: translateY(1px);
    box-shadow: 0 2px calc(6px * var(--dialog-scale-factor)) #00000066;
}

.dialog-answer-option.selected {
    background: linear-gradient(145deg, #4a7c59, #2d5233) !important;
    border-color: #66aa66 !important;
    color: #ccffcc !important;
    transform: scale(0.98) !important;
    animation: selectedPulse 0.3s ease;
}

.dialog-answer-option.disabled {
    opacity: 0.5 !important;
    cursor: not-allowed !important;
    pointer-events: none !important;
}

@keyframes selectedPulse {
    0% { transform: scale(1); }
    50% { transform: scale(1.05); }
    100% { transform: scale(1); }
}

/* Answer Container - Dialog Manager styled (unused but kept for compatibility) */
.dialog-answers-container {
    position: absolute;
    top: 100%;
    left: 0;
    width: 100%;
    margin-top: calc(20px * var(--dialog-scale-factor));
    display: grid;
    grid-template-columns: 1fr 1fr;
    grid-template-rows: 1fr 1fr;
    gap: calc(10px * var(--dialog-scale-factor));
    opacity: 0;
    transform: translateY(10px);
    transition: all 0.3s ease;
    /* Performance optimizations */
    will-change: transform, opacity;
    transform: translateZ(0);
}

.dialog-answers-container.show {
    opacity: 1;
    transform: translateY(0) translateZ(0);
}

/* Answer Highlighting in Dialog Text */
.dialog-answer-highlight {
    color: #66ff66 !important; /* Default bright green for user answers */
    font-weight: bold !important;
    animation: answerGlow-green 2s ease-in-out infinite alternate !important;
}

/* Color variants for highlighted answers in text */
.dialog-answer-highlight.red {
    color: #ff6666 !important;
    animation: answerGlow-red 2s ease-in-out infinite alternate !important;
}

.dialog-answer-highlight.blue {
    color: #6666ff !important;
    animation: answerGlow-blue 2s ease-in-out infinite alternate !important;
}

.dialog-answer-highlight.green {
    color: #66ff66 !important;
    animation: answerGlow-green 2s ease-in-out infinite alternate !important;
}

.dialog-answer-highlight.yellow {
    color: #ffff66 !important;
    animation: answerGlow-yellow 2s ease-in-out infinite alternate !important;
}

/* Alternative highlight styles for different contexts */
.dialog-answer-highlight.info {
    color: #66aaff !important; /* Blue for informational highlights */
}

.dialog-answer-highlight.warning {
    color: #ffaa66 !important; /* Orange for warnings */
}

.dialog-answer-highlight.emphasis {
    color: #ff6666 !important; /* Red for emphasis */
}

/* Answer reference in dialog text (legacy) */
.dialog-answer-reference {
    color: #66aa66; /* Default green color for referenced answers */
    font-weight: bold;
}

/* Animation keyframes for colored highlights */
@keyframes answerGlow-red {
    from {
        opacity: 0.8;
    }
    to {
        opacity: 1;
    }
}

@keyframes answerGlow-blue {
    from {
        opacity: 0.8;
    }
    to {
        opacity: 1;
    }
}

@keyframes answerGlow-green {
    from {
        opacity: 0.8;
    }
    to {
        opacity: 1;
    }
}

@keyframes answerGlow-yellow {
    from {
        opacity: 0.8;
    }
    to {
        opacity: 1;
    }
}

/* Mobile responsive styles */
@media (max-width: 768px) {
    .dialog-box {
        max-width: 85vw;
        font-size: calc(var(--dialog-font-size) * 1.1);
        line-height: 1.3;
    }
    
    .dialog-answers-container {
        gap: calc(8px * var(--dialog-scale-factor));
    }
    
    .dialog-answer-container {
        width: 95% !important;
        gap: 10px !important;
        bottom: 10px !important;
    }
    
    .dialog-answer-option {
        font-size: 8px !important;
        padding: 12px 15px !important;
        min-height: 50px !important;
    }
    
    /* Mobile color variants for answer options */
    .dialog-answer-option.red {
        color: #ff6666 !important;
        border-color: #ff6666 !important;
    }
    
    .dialog-answer-option.blue {
        color: #6666ff !important;
        border-color: #6666ff !important;
    }
    
    .dialog-answer-option.green {
        color: #66ff66 !important;
        border-color: #66ff66 !important;
    }
    
    .dialog-answer-option.yellow {
        color: #ffff66 !important;
        border-color: #ffff66 !important;
    }
    
    /* Disable animations on mobile for better performance */
    .dialog-answer-highlight {
        animation: none !important;
    }
    
    .dialog-answer-highlight.red {
        animation: none !important;
    }
    
    .dialog-answer-highlight.blue {
        animation: none !important;
    }
    
    .dialog-answer-highlight.green {
        animation: none !important;
    }
    
    .dialog-answer-highlight.yellow {
        animation: none !important;
    }
}

/* Interaction Points System */
.interaction-point {
    position: fixed;
    width: 24px;
    height: 24px;
    background: rgba(255, 255, 255, 0.9);
    border: 2px solid #ffffff;
    /* border-radius: 50%; */
    cursor: pointer;
    z-index: 999;
    display: flex;
    align-items: center;
    justify-content: center;
    font-family: 'Press Start 2P', monospace !important;
    font-size: 12px;
    font-weight: bold;
    color: #333333;
    transition: all 0.1s ease;
    transform: scale(0);
    opacity: 0;
    pointer-events: none;
    /* Performance optimizations */
    will-change: transform, opacity;
    transform-origin: center;
    backface-visibility: hidden;
    contain: layout style;
}

.interaction-point.show {
    transform: scale(1);
    opacity: 1;
    pointer-events: all;
}

.interaction-point:hover {
    transform: scale(1.2);
    background: rgba(255, 255, 255, 1);
    box-shadow: 0 0 8px rgba(255, 255, 255, 0.8);
}

.interaction-point:active {
    transform: scale(0.9);
}

/* All interaction points use the same small style */

.interaction-point.question {
    color: #ffffff;
    border-color: #10253fe6;
    background: #10253fe6;
}

.interaction-point.info,
.interaction-point.interact {
    width: 5px;
    height: 5px;
    color: #ffffff;
    border-color: #ffffff;
    background: rgba(255, 255, 255, 0.9);
}

.interaction-point.question:hover,
.interaction-point.info:hover,
.interaction-point.interact:hover {
    box-shadow: 0px 0px 5px 2px #ffffff6b;
}

/* Mobile adjustments for interaction points */
@media (max-width: 768px) {

    .interaction-point.info,
    .interaction-point.interact {
        width: 8px;
        height: 8px;
    }
}